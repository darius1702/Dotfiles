# let nwg-displays manage monitors
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/workspaces.conf

# fallback for unkown monitors
monitor = , preferred, auto, 1

# key bindings
source = ~/.config/hypr/binds.conf

# cursors
env = HYPRCURSOR_THEME,Bibata-Modern-Ice
env = HYPRCURSOR_SIZE,20
env = XCURSOR_THEME,Bibata-Modern-Ice
env = XCURSOR_SIZE,20

# Some default env vars.
env = XDG_SESSION_TYPE,wayland
env = XDG_CURRENT_DESKTOP,Hyprland # Otherwise there is some "XDG_CURRENT_DESKTOP is managed externally ..." error
env = MOZ_ENABLE_WAYLAND,1
env = GDK_BACKEND,wayland
env = SSH_AUTH_SOCK,$XDG_RUNTIME_DIR/ssh-agent.socket

# for some these start as (inactive) when enabled, so start them manually here
exec-once = systemctl --user start hypridle.service
exec-once = systemctl --user start hyprpolkitagent.service

exec-once = hyprpm reload

exec-once = swaybg -i $HOME/.config/hypr/current_wallpaper -m fill
exec-once = $HOME/Dotfiles/scripts/waybar-hotreload # status bar
exec-once = swaync                                  # notifications
exec-once = solaar -w hide -b solaar                # logitech devices
exec-once = syshud -p top                           # pretty OSD
exec-once = batsignal -w 15 -c 8                    # low battery notification
exec-once = vicinae server

# clipboard history (replaced by vicinae)
# exec-once = wl-paste --type text --watch cliphist store
# exec-once = wl-paste --type image --watch cliphist store

# bluetooth tray icon, there's a vicinae extension for this
# exec-once = blueman-applet

windowrule {
    name = make-resources-floating
    match:class = net.nokyan.Resources
    float = true
}

windowrule {
    name = make-iwgtk-floating
    match:class = org.twosheds.iwgtk
    float = true
}

windowrule {
    name = floating-decorations
    match:float = true
    border_size = 1
}

windowrule {
    name = only-shadow-on-floating
    match:float = false
    no_shadow = on
}


# windowrule {
#     name = make-foot-floating
#     match:class = foot
#     float = true
# }

input {
    kb_layout = de
    kb_variant = us
    kb_model =
    kb_options = ctrl:nocaps
    kb_rules =

    repeat_rate = 40
    repeat_delay = 300

    follow_mouse = 2
    float_switch_override_focus = 0

    touchpad {
        natural_scroll = false
        tap-to-click = false
    }

    sensitivity = 0
}

cursor {
    no_warps = true
    inactive_timeout = 5
}

general {
    gaps_in = 3
    gaps_out = 5
    border_size = 3
    col.active_border = rgba(ffeeeeaa)
    col.inactive_border = rgba(43434399)

    layout = master

    allow_tearing = false
}

binds {
    # make movefocus move to another monitor when window is fullscreen
    movefocus_cycles_fullscreen = 0
    # workspace_back_and_forth = true
}

decoration {
    rounding = 2
    rounding_power = 4
    border_part_of_window = true

    blur {
        enabled = false
        size = 8
        noise = 0
        contrast= 1
    }

    shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }
}

animations {
    enabled = true

    # https://easings.net/#easeOutCubic
    bezier = easeOutCubic, 0.33, 1, 0.68, 1
    animation = global, 0
    animation = windows, 1, 1, easeOutCubic, popin 70%
    # animation = windowsIn,0
    # animation = windowsOut,0
    animation = layers, 1, 1, easeOutCubic, fade
    animation = fadeLayers, 1, 1, easeOutCubic
    # animation = layers, 1, 1.3, easeOutCubic
    animation = workspaces, 1, 1.3, easeOutCubic, slide
}

master {
    orientation = "left"
    new_on_active = "after"
}

misc {
    background_color = 0x000000
    font_family = "SF Pro Text"
    enable_swallow = true
    swallow_regex = ^foot$
    disable_hyprland_logo = true
    vfr = true
}

debug {
  disable_logs = true
}

plugin {
    hyprbars {
        bar_height = 28
        bar_part_of_window = true
        bar_precedence_over_border = true
        bar_color = rgb(e6e9ef)
        col.text = rgb(4c4f69)
        bar_text_font = SF Pro Display Medium
        bar_text_size = 11
        bar_text_align = center
        bar_button_padding = 8
        bar_padding = 10
        inactive_button_color = rgb(bcc0cc)
        hyprbars-button = rgb(e78284), 10, , hyprctl dispatch killactive
        hyprbars-button = rgb(a6d189), 10, , hyprctl dispatch fullscreen 1
        hyprbars-button = rgb(8caaee), 10, , hyprctl dispatch togglefloating
    }
}

windowrule {
    name = only-bar-on-floating
    match:float = false
    hyprbars:no_bar = true
}

windowrule {
    name = dim-inactive-bars
    match:focus = false
    hyprbars:bar_color = rgb(eff1f5)
    hyprbars:title_color = rgb(8c8fa1)
}
